"use strict";document.addEventListener("DOMContentLoaded",function(){getSum(),showImgModal()});let calcForm=document.querySelector("#calcform form"),activeImg=calcForm.querySelector("img.active"),kapitalLong=calcForm.querySelector("#kapital-long"),kapitalWidh=calcForm.querySelector("#kapital-width"),fronton=calcForm.querySelector("#fronton"),checkboxes=calcForm.querySelectorAll(".checkbox"),frontonHeight=calcForm.querySelector("#fronton-height");function getSum(){let e=+calcForm.querySelector("#srub-long").value,t=+calcForm.querySelector("#srub-width").value,c=+calcForm.querySelector("#srub-height").value,o=+calcForm.querySelector("#fronton-height").value,r=+calcForm.querySelector("#diametr").value,n=+document.querySelector("#calcform").dataset.percent,a=2*(e+t)*c*r;kapitalLong.checked&&(a+=e*c*r),kapitalWidh.checked&&(a+=t*c*r),fronton.checked&&(a+=t*o*r),calcForm.querySelector("#total-price").innerText=a+" руб.",calcForm.querySelector("#total-install").innerText=a*n/100+" руб."}function getImg(){let e=calcForm.querySelectorAll("img");activeImg.className="no-img",kapitalLong.checked||kapitalWidh.checked||fronton.checked||(activeImg=e[0]),kapitalLong.checked||kapitalWidh.checked||!fronton.checked||(activeImg=e[1]),kapitalLong.checked||!kapitalWidh.checked||fronton.checked||(activeImg=e[2]),!kapitalLong.checked&&kapitalWidh.checked&&fronton.checked&&(activeImg=e[3]),!kapitalLong.checked||kapitalWidh.checked||fronton.checked||(activeImg=e[4]),kapitalLong.checked&&!kapitalWidh.checked&&fronton.checked&&(activeImg=e[5]),kapitalLong.checked&&kapitalWidh.checked&&!fronton.checked&&(activeImg=e[6]),kapitalLong.checked&&kapitalWidh.checked&&fronton.checked&&(activeImg=e[7]),activeImg.className="active"}function showImgModal(){let e=document.querySelectorAll("img.modal"),t=document.querySelector(".img-modal");e.forEach(function(e){e.addEventListener("click",function(){let c=e.getAttribute("src");t.querySelector("img").setAttribute("src",c),t.style.display="block"})}),t.addEventListener("click",function(){t.style.display="none"})}fronton.addEventListener("click",function(){this.checked?(frontonHeight.removeAttribute("disabled"),frontonHeight.parentNode.classList.add("active")):(frontonHeight.setAttribute("disabled","disabled"),frontonHeight.parentNode.classList.remove("active"))}),calcForm.querySelector("#srub-long").addEventListener("change",function(){getSum()}),calcForm.querySelector("#srub-width").addEventListener("change",function(){getSum()}),calcForm.querySelector("#srub-height").addEventListener("change",function(){getSum()}),calcForm.querySelector("#fronton-height").addEventListener("change",function(){getSum()}),calcForm.querySelector("#diametr").addEventListener("change",function(){getSum()}),checkboxes.forEach(function(e){e.addEventListener("click",function(){getImg(),getSum()})});const lazyImg=document.querySelectorAll(".photo img"),options={root:null,rootMargin:"0px",threshold:.1};function handleImg(e,t){e.forEach(e=>{e.intersectionRatio>0&&loadImg(e.target)})}function loadImg(e){e.src=e.getAttribute("data")}const observer=new IntersectionObserver(handleImg,options);lazyImg.forEach(e=>{observer.observe(e)});